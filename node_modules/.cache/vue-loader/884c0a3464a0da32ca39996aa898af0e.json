{"remainingRequest":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BL\\vue-bilibili-master\\src\\components\\article\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BL\\vue-bilibili-master\\src\\components\\article\\comment.vue","mtime":1593351739000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb21tZW50SXRlbSBmcm9tICIuL2NvbW1lbnRJdGVtIjsKZXhwb3J0IGRlZmF1bHQgewogICAgCiAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAgIGNvbW1lbnRMaXN0Om51bGwsCiAgICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGNvbW1lbnRJdGVtCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjb21tZW50RGF0YSgpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoIi9jb21tZW50LyIgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICBpZihyZXMuZGF0YSl7CiAgICAgICAgdGhpcy4kZW1pdCgnbGVuZ3Roc2VsZWN0JyxyZXMuZGF0YS5sZW5ndGgpCiAgICAgIH0KICAgICAgdGhpcy5jb21tZW50TGlzdCA9IHRoaXMuY2hhbmdlQ29tbWVudERhdGEocmVzLmRhdGEpCiAgICB9LAogICAgY2hhbmdlQ29tbWVudERhdGEoZGF0YSkgewogICAgICBmdW5jdGlvbiBmbih0ZW1wKSB7CiAgICAgICAgbGV0IGFycjEgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChkYXRhW2ldLnBhcmVudF9pZCA9PSB0ZW1wKSB7CiAgICAgICAgICAgIGFycjEucHVzaChkYXRhW2ldKTsKICAgICAgICAgICAgZGF0YVtpXS5jaGlsZCA9IGZuKGRhdGFbaV0uY29tbWVudF9pZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnIxOwogICAgICB9CiAgICAgICByZXR1cm4gZm4obnVsbCk7CiAgICB9LAogICAgcHVibGlzaENsaWNrKGlkKSB7CiAgICAgdGhpcy4kZW1pdCgncHVibGlzaENsaWNrJyxpZCkKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbW1lbnREYXRhKCk7CiAgfQp9Owo="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components/article","sourcesContent":["<template>\n  <div class=\"commentParent\">\n    <div v-for=\"(item,index) in commentList\" :key=\"index\">\n      <div class=\"commentItem\">\n        <div class=\"userImg\">\n          <img v-if=\"item.userinfo && item.userinfo.user_img\" :src=\"item.userinfo.user_img\" alt />\n          <img v-else src=\"@/assets/default_img.jpg\" alt=\"\">\n        </div>\n        <div class=\"commentContent\">\n          <p>\n            <span v-if=\"item.userinfo\">{{item.userinfo.name}}</span>\n            <span v-else>此用户无姓名</span>\n            <span>{{item.comment_date}}</span>\n          </p>\n          <div>\n            {{item.comment_content}}\n            <span class=\"publishs\" @click=\"publishClick(item.comment_id)\">回复</span>\n          </div>\n        </div>\n      </div>\n     <div style=\"padding-left:8.333vw;\"><comment-item @PostPublish=\"publishClick\" :commentChild=\"item.child\"></comment-item></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport commentItem from \"./commentItem\";\nexport default {\n    \n  data() {\n      return {\n          commentList:null,\n      }\n  },\n  components: {\n    commentItem\n  },\n  methods: {\n    async commentData() {\n      const res = await this.$http.get(\"/comment/\" + this.$route.params.id);\n      if(res.data){\n        this.$emit('lengthselect',res.data.length)\n      }\n      this.commentList = this.changeCommentData(res.data)\n    },\n    changeCommentData(data) {\n      function fn(temp) {\n        let arr1 = [];\n        for (var i = 0; i < data.length; i++) {\n          if (data[i].parent_id == temp) {\n            arr1.push(data[i]);\n            data[i].child = fn(data[i].comment_id);\n          }\n        }\n        return arr1;\n      }\n       return fn(null);\n    },\n    publishClick(id) {\n     this.$emit('publishClick',id)\n    }\n  },\n  created() {\n    this.commentData();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.commentParent {\n  padding: 2.778vw 2.778vw;\n  > div {\n    border-bottom: 0.278vw solid #e7e7e7;\n  }\n  .commentItem {\n    display: flex;\n    margin: 2.778vw 0;\n    .userImg {\n      margin-right: 2.778vw;\n      img {\n        width: 9.722vw;\n        height: 9.722vw;\n      }\n    }\n    .commentContent {\n      flex: 1;\n      position: relative;\n      p {\n        font-size: 3.611vw;\n        color: #555;\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 1.389vw;\n      }\n      div {\n        font-size: 3.611vw;\n      }\n      .publishs{\n        position: absolute;\n        right: 0;\n        color: red;\n      }\n    }\n  }\n}\n</style>"]}]}