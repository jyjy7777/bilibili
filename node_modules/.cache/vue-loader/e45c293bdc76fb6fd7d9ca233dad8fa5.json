{"remainingRequest":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BL\\vue-bilibili-master\\src\\views\\Article.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BL\\vue-bilibili-master\\src\\views\\Article.vue","mtime":1593351739000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9OYXZiYXIudnVlJwppbXBvcnQgY292ZXIgZnJvbSAnLi9jb3ZlcicKaW1wb3J0IGNvbW1lbnRUaXRsZSBmcm9tICdAL2NvbXBvbmVudHMvYXJ0aWNsZS9jb21tZW50VGl0bGUudnVlJwppbXBvcnQgY29tbWVudCBmcm9tICdAL2NvbXBvbmVudHMvYXJ0aWNsZS9jb21tZW50LnZ1ZScKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb2RlbDpudWxsLAogICAgICAgICAgICBjb21tZW5kTGlzdDpudWxsLAogICAgICAgICAgICBsZW5zOm51bGwsCiAgICAgICAgICAgIFBvc3Rjb206ewogICAgICAgICAgICAgICAgY29tbWVudF9jb250ZW50OicnLAogICAgICAgICAgICAgICAgY29tbWVudF9kYXRlOicnLAogICAgICAgICAgICAgICAgcGFyZW50X2lkOm51bGwsCiAgICAgICAgICAgICAgICBhcnRpY2xlX2lkOm51bGwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29sbGVjdGlvbkFjdGl2ZTpudWxsLAogICAgICAgICAgICBzdWJzY3JpdGlvbkFjdGl2ZTpudWxsLAogICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOnsKICAgICAgICBOYXZCYXIsCiAgICAgICAgY292ZXIsCiAgICAgICAgY29tbWVudFRpdGxlLAogICAgICAgIGNvbW1lbnQKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICAvL+iOt+WPluaWh+eroOS/oeaBrwogICAgICAgIGFzeW5jIGFydGljbGVpdGVtRGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9hcnRpY2xlLycgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgICAgIHRoaXMubW9kZWwgPSByZXMuZGF0YVswXQogICAgICAgICAgICBpZih0aGlzLm1vZGVsKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcml0aW9uSW5pdCgpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v6I635Y+W5o6o6I2Q5paH56ugCiAgICAgICAgYXN5bmMgY29tbWVuZERhdGEoKSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvY29tbWVuZCcpCiAgICAgICAgICAgIHRoaXMuY29tbWVuZExpc3QgPSByZXMuZGF0YQogICAgICAgIH0sCiAgICAgICAgLy/lj5HpgIHor4TorroKICAgICAgICBhc3luYyBQb3N0U3VjY2VzcyhyZXMpIHsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkKICAgICAgICAgICAgbGV0IG0gPSBkYXRlLmdldE1vbnRoKCkgKyAxCiAgICAgICAgICAgIGxldCBkID0gZGF0ZS5nZXREYXRlKCkKICAgICAgICAgICAgaWYobSA8IDEwKSB7CiAgICAgICAgICAgICAgICBtID0gJzAnICsgbQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGQgPCAxMCkgewogICAgICAgICAgICAgICAgZCA9ICcwJyArIGQKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgc3RyID0gYCR7bX0tJHtkfWAKICAgICAgICAgICAgdGhpcy5Qb3N0Y29tLmNvbW1lbnRfY29udGVudCA9IHJlcwogICAgICAgICAgICB0aGlzLlBvc3Rjb20uY29tbWVudF9kYXRlID0gc3RyCiAgICAgICAgICAgIHRoaXMuUG9zdGNvbS5hcnRpY2xlX2lkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2NvbW1lbnRfcG9zdC8nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksdGhpcy5Qb3N0Y29tKQogICAgICAgICAgICB0aGlzLiRyZWZzLmNvbW1lbnRQdWxpc2guY29tbWVudERhdGEoKQogICAgICAgICAgICB0aGlzLlBvc3Rjb20ucGFyZW50X2lkID0gbnVsbAogICAgICAgICAgICBpZihyZXN1bHQuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbXNnLmZhaWwoJ+ivhOiuuuWPkeihqOaIkOWKnycpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v6IGa54Sm6L6T5YWl5qGGCiAgICAgICAgUG9zdENoaWxkQ2xpY2soaWQpIHsKICAgICAgICAgICAgdGhpcy5Qb3N0Y29tLnBhcmVudF9pZCA9IGlkCiAgICAgICAgICAgIHRoaXMuJHJlZnMuY29tbWVudElwdC5mb2N1c0lwdCgpCiAgICAgICAgfSwKICAgICAgICAvL+aUtuiXj+aWh+eroAogICAgICAgIGFzeW5jIGNvbGxlY3Rpb25DbGljaygpIHsKICAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSl7CiAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2NvbGxlY3Rpb24vJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpLHthcnRpY2xlX2lkOnRoaXMuJHJvdXRlLnBhcmFtcy5pZH0pCiAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLm1zZyA9PSAn5pS26JeP5oiQ5YqfJyl7CiAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25BY3RpdmUgPSB0cnVlCiAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uQWN0aXZlID0gZmFsc2UKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kbXNnLmZhaWwocmVzLmRhdGEubXNnKQogICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v6L+b5YWl6aG16Z2i6I635Y+W5piv5ZCm5pS26JePCiAgICAgICAgYXN5bmMgY29sbGVjdGlvbkluaXQoKSB7CiAgICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKXsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvY29sbGVjdGlvbi8nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksewogICAgICAgICAgICAgICAgICAgIHBhcmFtczp7CiAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVfaWQ6dGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uQWN0aXZlID0gcmVzLmRhdGEuc3VjY2VzcwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvL+eCueWHu+WFs+azqOWPkeW4lueUqOaItwogICAgICAgIGFzeW5jIHN1YnNjcmlwdENsaWNrKCkgewogICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKXsKICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvc3ViX3NjcmlwdGlvbi8nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykse3N1Yl9pZDp0aGlzLm1vZGVsLnVzZXJpZH0pCiAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLm1zZyA9PSAn5YWz5rOo5oiQ5YqfJyl7CiAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcml0aW9uQWN0aXZlID0gdHJ1ZQogICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXRpb25BY3RpdmUgPSBmYWxzZQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIHRoaXMuJG1zZy5mYWlsKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICAgCiAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy/ov5vlhaXpobXpnaLojrflj5bmmK/lkKbmlLbol48KICAgICAgICBhc3luYyBzdWJzY3JpdGlvbkluaXQoKSB7CiAgICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKXsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvc3ViX3NjcmlwdGlvbi8nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJyksewogICAgICAgICAgICAgICAgICAgIHBhcmFtczp7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yl9pZDp0aGlzLm1vZGVsLnVzZXJpZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXRpb25BY3RpdmUgPSByZXMuZGF0YS5zdWNjZXNzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICAgdGhpcy5hcnRpY2xlaXRlbURhdGEoKQogICAgICAgICB0aGlzLmNvbW1lbmREYXRhKCkKICAgICAgICAgdGhpcy5jb2xsZWN0aW9uSW5pdCgpCiAgICB9LAogICAgd2F0Y2g6ewogICAgICAgICRyb3V0ZSgpIHsKICAgICAgICAgICAgdGhpcy5hcnRpY2xlaXRlbURhdGEoKQogICAgICAgICAgICB0aGlzLmNvbW1lbmREYXRhKCkKICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uSW5pdCgpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Article.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-if=\"model\">\n      <nav-bar></nav-bar> \n      <div class=\"detailinfo\">\n         <div class=\"video\">\n              <video controls=\"controls\" :src=\"model.content\"></video>\n         </div>\n         <div class=\"detailinfoText\">\n              <div>\n                  <span>{{model.category.title}}</span>\n                  <span>{{model.name}}</span>\n              </div>\n              <div>\n                  <span>{{model.userinfo.name}}</span>\n                  <span>146.4万次观看</span>\n                  <span>5281弹幕</span>\n                  <span>{{model.date}}</span>\n              </div>\n              <div>\n                  <p @click=\"collectionClick\" :class=\"{activeColor:collectionActive}\">\n                      <span class=\"icon-star-full\" ></span>\n                      <span>收藏</span>\n                  </p>\n                  <p @click=\"subscriptClick\" :class=\"{activeColor:subscritionActive}\">\n                      <span class=\"icon-bubble\"></span>\n                      <span>关注</span>\n                  </p>\n                  <p>\n                      <span class=\"icon-redo2\"></span>\n                      <span>分享</span>\n                  </p>\n              </div>\n         </div>\n          <div class=\"detailparent\">\n          <cover class=\"detailitem\" v-for=\"(item,index) in commendList\" :key=\"index\"  :detailitem=\"item\"/>\n      </div>\n      <comment-title :dataLength=\"lens\" @Postcomment=\"PostSuccess\" ref=\"commentIpt\"  />\n      <comment @lengthselect=\"len => lens = len\" ref=\"commentPulish\"  @publishClick=\"PostChildClick\" />\n          \n      </div>\n     \n  </div>\n</template>\n\n<script>\nimport NavBar from '@/components/common/Navbar.vue'\nimport cover from './cover'\nimport commentTitle from '@/components/article/commentTitle.vue'\nimport comment from '@/components/article/comment.vue'\nexport default {\n    data() {\n        return {\n            model:null,\n            commendList:null,\n            lens:null,\n            Postcom:{\n                comment_content:'',\n                comment_date:'',\n                parent_id:null,\n                article_id:null\n            },\n            collectionActive:null,\n            subscritionActive:null,\n           \n        }\n    },\n    components:{\n        NavBar,\n        cover,\n        commentTitle,\n        comment\n    },\n    methods:{\n        //获取文章信息\n        async articleitemData() {\n            const res = await this.$http.get('/article/' + this.$route.params.id)\n            this.model = res.data[0]\n            if(this.model) {\n                this.subscritionInit()\n            }\n        },\n        //获取推荐文章\n        async commendData() {\n            const res = await this.$http.get('/commend')\n            this.commendList = res.data\n        },\n        //发送评论\n        async PostSuccess(res) {\n            const date = new Date()\n            let m = date.getMonth() + 1\n            let d = date.getDate()\n            if(m < 10) {\n                m = '0' + m\n            }\n            if(d < 10) {\n                d = '0' + d\n            }\n            let str = `${m}-${d}`\n            this.Postcom.comment_content = res\n            this.Postcom.comment_date = str\n            this.Postcom.article_id = this.$route.params.id\n            const result = await this.$http.post('/comment_post/' + localStorage.getItem('id'),this.Postcom)\n            this.$refs.commentPulish.commentData()\n            this.Postcom.parent_id = null\n            if(result.status == 200) {\n                this.$msg.fail('评论发表成功')\n            }\n        },\n        //聚焦输入框\n        PostChildClick(id) {\n            this.Postcom.parent_id = id\n            this.$refs.commentIpt.focusIpt()\n        },\n        //收藏文章\n        async collectionClick() {\n           if(localStorage.getItem('token')){\n               const res = await this.$http.post('/collection/' + localStorage.getItem('id'),{article_id:this.$route.params.id})\n               if(res.data.msg == '收藏成功'){\n                   this.collectionActive = true\n               }else{\n                   this.collectionActive = false\n               }\n                this.$msg.fail(res.data.msg)\n           }\n        },\n        //进入页面获取是否收藏\n        async collectionInit() {\n            if(localStorage.getItem('token')){\n                const res = await this.$http.get('/collection/' + localStorage.getItem('id'),{\n                    params:{\n                        article_id:this.$route.params.id\n                    }\n                })\n            this.collectionActive = res.data.success\n            }\n        },\n        //点击关注发帖用户\n        async subscriptClick() {\n           if(localStorage.getItem('token')){\n               const res = await this.$http.post('/sub_scription/' + localStorage.getItem('id'),{sub_id:this.model.userid})\n               if(res.data.msg == '关注成功'){\n                   this.subscritionActive = true\n               }else{\n                   this.subscritionActive = false\n               }\n               this.$msg.fail(res.data.msg)\n               \n           }\n        },\n        //进入页面获取是否收藏\n        async subscritionInit() {\n            if(localStorage.getItem('token')){\n                const res = await this.$http.get('/sub_scription/' + localStorage.getItem('id'),{\n                    params:{\n                        sub_id:this.model.userid\n                    }\n                })\n            this.subscritionActive = res.data.success\n            }\n        }\n    },\n    created() {\n         this.articleitemData()\n         this.commendData()\n         this.collectionInit()\n    },\n    watch:{\n        $route() {\n            this.articleitemData()\n            this.commendData()\n            this.collectionInit()\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.detailinfo{\n    background-color: white;\n    .video{\n        width: 100%;\n        video{\n            width: 100%;\n        }\n    }\n}\n.detailinfoText{\n    padding: 4.167vw;\n    div:nth-child(1) {\n        span:nth-child(1) {\n            padding:0 2.778vw;\n            color: #fb7299;\n            background-color: #f4f4f4;\n            border-radius: 2.778vw;\n        }\n    }\n    div:nth-child(2) {\n        padding: 2.778vw 2.778vw;\n        span{\n            color: #aaa;\n            font-size: 3.333vw;\n            margin-right: 2.778vw;\n        }\n        span:nth-child(1) {\n            color: black;\n            font-size: 4vw;\n            padding-right:2.778vw;\n        }\n    }\n    div:nth-child(3) {\n        padding: 0 2.778vw;\n        display: flex;\n        \n        p{\n            margin-right: 10px;\n            display: flex;\n            align-items: center;\n            color: #757575;\n            span:nth-child(1) {\n                margin-right: 3px;\n                font-size: 21px;\n            }\n            span:nth-child(2) {\n                font-size: 13px;\n            }\n        }\n        .activeColor{\n            color: #fb7299;\n        }\n    }\n    \n}\n\n.detailparent {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  .detailitem {\n    margin: 1.389vw 0;\n    width: 45%;\n  }\n}\n</style>"]}]}