{"remainingRequest":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BL\\vue-bilibili-master\\src\\views\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BL\\vue-bilibili-master\\src\\views\\Edit.vue","mtime":1593351739000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9OYXZiYXIudnVlJwppbXBvcnQgZWRpdEJhbm5lciBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL2VkaXRCYW5uZXIudnVlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vZGVsOnt9LAogICAgICAgICAgICBzaG93OmZhbHNlLAogICAgICAgICAgICB0ZXh0c2hvdzpmYWxzZSwKICAgICAgICAgICAgZ2VuZGVyc2hvdzpmYWxzZSwKICAgICAgICAgICAgY29udGVudDonJywKICAgICAgICAgICAgYWN0aW9uczogWwogICAgICAgICAgICAgICAgeyBuYW1lOiAn55S3Jyx2YWw6MSB9LAogICAgICAgICAgICAgICAgeyBuYW1lOiAn5aWzJyx2YWw6MCB9LAogICAgICAgICAgICBdLAogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOnsKICAgICAgICBOYXZCYXIsCiAgICAgICAgZWRpdEJhbm5lcgogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIC8v6L+b5YWl57uE5Lu26LCD5Y+W5pWw5o2u5riy5p+T6aG16Z2iCiAgICAgICAgYXN5bmMgc2VsZWN0VXNlcigpIHsKICAgICAgICAgICAgIGNvbnN0IHJlcyA9ICBhd2FpdCB0aGlzLiRodHRwLmdldCgnL3VzZXIvJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpKQogICAgICAgICAgICB0aGlzLm1vZGVsID0gcmVzLmRhdGFbMF0gCiAgICAgICAgfSwKICAgICAgIGFzeW5jIGFmdGVyUmVhZChmaWxlKSB7CiAgICAgICAgICAgY29uc3QgZnJvbWRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgICAgIGZyb21kYXRhLmFwcGVuZCgnZmlsZScsZmlsZS5maWxlKQogICAgICAgICAgIGNvbnN0IHJlcyA9ICBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy91cGxvYWQnLGZyb21kYXRhKQogICAgICAgICAgIHRoaXMubW9kZWwudXNlcl9pbWcgPSByZXMuZGF0YS51cmwKICAgICAgICAgICB0aGlzLlVzZXJVcGRhdGUoKQogICAgICAgICAgIHRoaXMuJHJlZnMubmF2YmFyLk5hdkluaXQoKQogICAgICAgfSwKICAgICAgIGFzeW5jIFVzZXJVcGRhdGUoKSB7CiAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvdXBkYXRlLycgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKSx0aGlzLm1vZGVsKQogICAgICAgICAgIGlmKHJlcy5kYXRhLmNvZGUgPT0gMjAwKXsKICAgICAgICAgICAgICAgdGhpcy4kbXNnLmZhaWwoJ+S/ruaUueaIkOWKnycpCiAgICAgICAgICAgfSAKICAgICAgIH0sCiAgICAgICBjb25maXJtQ2xpY2soKSB7CiAgICAgICAgICAgdGhpcy5tb2RlbC5uYW1lID0gIHRoaXMuY29udGVudAogICAgICAgICAgIHRoaXMuVXNlclVwZGF0ZSgpCiAgICAgICAgICAgdGhpcy5jb250ZW50ID0gJycKICAgICAgIH0sCiAgICAgICB0ZXh0YXJlYUNsaWNrKCkgewogICAgICAgICAgIHRoaXMubW9kZWwudXNlcl9kZXNjID0gdGhpcy5jb250ZW50CiAgICAgICAgICAgdGhpcy5Vc2VyVXBkYXRlKCkKICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAnJwogICAgICAgfSwKICAgICAgIG9uU2VsZWN0KGRhdGEpIHsKICAgICAgICAgICB0aGlzLm1vZGVsLmdlbmRlciA9IGRhdGEudmFsCiAgICAgICAgICAgdGhpcy5Vc2VyVXBkYXRlKCkKICAgICAgICAgICB0aGlzLmdlbmRlcnNob3cgPSBmYWxzZQogICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICB0aGlzLnNlbGVjdFVzZXIoKQogICAgfQp9Cg=="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-if=\"model\" class=\"editViews\">\n      <div style=\"margin-bottom:2.778vw;\"><nav-bar ref=\"navbar\"></nav-bar></div>\n      <div class=\"uploadfile\">\n          <div class=\"uploadimg\"><van-uploader preview-size=\"100vw\" :after-read=\"afterRead\" /></div>\n          <edit-banner left=\"头像\">\n              <img :src=\"model.user_img\"  slot=\"right\" alt=\"\" v-if=\"model.user_img\">\n              <img src=\"@/assets/default_img.jpg\"  slot=\"right\" alt=\"\" v-else>\n          </edit-banner>\n      </div>\n         \n      <edit-banner left=\"昵称\" @bannerClick=\"show = true\">\n          <a href=\"javascript:;\" slot=\"right\">{{model.name}}</a>\n      </edit-banner>\n\n      <edit-banner left=\"账号\">\n          <a href=\"javascript:;\" slot=\"right\">{{model.username}}</a>\n      </edit-banner>\n\n      <edit-banner left=\"性别\" @bannerClick=\"gendershow = true\">\n           <a href=\"javascript:;\" slot=\"right\">{{model.gender ? '男' : '女'}}</a>\n      </edit-banner>\n\n      <edit-banner left=\"个签\" @bannerClick=\"textshow = true\"></edit-banner>\n\n      <div class=\"editback\" @click=\"$router.back()\">返回个人中心</div>\n      \n\n      <van-dialog v-model=\"show\" \n      title=\"昵称\" \n      show-cancel-button \n      @confirm=\"confirmClick\"\n      @cancel=\"content = ''\"\n      >\n          <van-field v-model=\"content\"  autofocus />\n      </van-dialog>\n\n\n      <van-dialog \n         v-model=\"textshow\"\n         title=\"个签\"\n         show-cancel-button\n         @confirm=\"textareaClick\"\n         @cancel=\"content = ''\"\n      >\n          <van-field v-model=\"content\" type=\"textarea\" autofocus />\n      </van-dialog>\n    \n\n       <van-action-sheet v-model=\"gendershow\" cancel-text=\"取消\" :actions=\"actions\" @select=\"onSelect\" />\n  </div>\n</template>\n\n<script>\nimport NavBar from '@/components/common/Navbar.vue'\nimport editBanner from '@/components/common/editBanner.vue'\nexport default {\n    data() {\n        return {\n            model:{},\n            show:false,\n            textshow:false,\n            gendershow:false,\n            content:'',\n            actions: [\n                { name: '男',val:1 },\n                { name: '女',val:0 },\n            ],\n        }\n    },\n    components:{\n        NavBar,\n        editBanner\n    },\n    methods:{\n        //进入组件调取数据渲染页面\n        async selectUser() {\n             const res =  await this.$http.get('/user/' + localStorage.getItem('id'))\n            this.model = res.data[0] \n        },\n       async afterRead(file) {\n           const fromdata = new FormData()\n           fromdata.append('file',file.file)\n           const res =  await this.$http.post('/upload',fromdata)\n           this.model.user_img = res.data.url\n           this.UserUpdate()\n           this.$refs.navbar.NavInit()\n       },\n       async UserUpdate() {\n           const res = await this.$http.post('/update/' + localStorage.getItem('id'),this.model)\n           if(res.data.code == 200){\n               this.$msg.fail('修改成功')\n           } \n       },\n       confirmClick() {\n           this.model.name =  this.content\n           this.UserUpdate()\n           this.content = ''\n       },\n       textareaClick() {\n           this.model.user_desc = this.content\n           this.UserUpdate()\n           this.content = ''\n       },\n       onSelect(data) {\n           this.model.gender = data.val\n           this.UserUpdate()\n           this.gendershow = false\n       }\n    },\n    created(){\n        this.selectUser()\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n.editViews a{\n    color: #333;\n}\n.editViews img{\n    height: 12.778vw;\n    width: 12.778vw;\n    border-radius: 50%;\n}\n.uploadfile{\n    overflow: hidden;\n    position: relative;\n    .uploadimg{\n        opacity: 0;\n        position: absolute;\n    }\n}\n.editback{\n    margin-top: 5.556vw;\n    background-color: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    color: #999;\n    padding: 4.167vw 0;\n    font-size: 4vw;\n}\n</style>"]}]}