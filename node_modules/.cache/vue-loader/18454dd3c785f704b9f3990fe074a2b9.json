{"remainingRequest":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BL\\vue-bilibili-master\\src\\views\\Home.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\BL\\vue-bilibili-master\\src\\views\\Home.vue","mtime":1593351739000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmhvbWUgewogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwp9Ci5kZXRhaWxwYXJlbnQgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogIC5kZXRhaWxpdGVtIHsKICAgIG1hcmdpbjogMS4zODl2dyAwOwogICAgd2lkdGg6IDQ1JTsKICB9Cn0KLmNhdGVnb3J5dGFiewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAuY2F0ZWdvcnktaWNvewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgei1pbmRleDogNTsKICAgIHJpZ2h0OiAwOwogICAgdG9wOiAxLjk0NHZ3OwogICAgcGFkZGluZzogMS4zODl2dyAyLjc3OHZ3OwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgfQp9Cgo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\" v-if=\"category\">\n    <nav-bar></nav-bar>\n    <div class=\"categorytab\">\n      <div class=\"category-ico\" @click=\"$router.push('/editcategory')\"><van-icon name=\"setting-o\" /></div>\n      <van-tabs v-model=\"active\" swipeable sticky animated>\n        <van-tab v-for=\"(item,index) in category\" :key=\"index\" :title=\"item.title\">\n          <van-list\n            v-model=\"item.loading\"\n            :immediate-check=\"false\"\n            :finished=\"item.finished\"\n            finished-text=\"我也是有底线的\"\n            @load=\"onLoad\"\n          >\n            <div class=\"detailparent\">\n              <cover\n                class=\"detailitem\"\n                :detailitem=\"categoryitem\"\n                v-for=\"(categoryitem,categoryindex) in item.list\"\n                :key=\"categoryindex\"\n              />\n            </div>\n          </van-list>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/Navbar.vue\";\nimport cover from \"./cover\";\nexport default {\n  data() {\n    return {\n      category: [],\n      active: 0\n    };\n  },\n  components: {\n    NavBar,\n    cover\n  },\n  activated() {\n    if(localStorage.getItem('newCat')) {\n        let newCat = JSON.parse(localStorage.getItem('newCat'))\n        this.category = this.changeCategory(newCat)\n        this.selectArticle();\n    }\n  },\n  methods: {\n    async selectCategory() {\n      if(localStorage.getItem('newCat')) {\n        return\n      }\n      const res = await this.$http.get(\"/category\");\n      this.category = this.changeCategory(res.data);\n      this.selectArticle();\n    },\n    changeCategory(data) {\n      const category1 = data.map((item, index) => {\n        item.list = [];\n        item.page = 0;\n        item.finished = false;\n        item.loading = true;\n        item.pagesize = 10;\n        return item;\n      });\n      return category1;\n    },\n    async selectArticle() {\n      const categoryitem = this.categoryItem();\n      const res = await this.$http.get(\"/detail/\" + categoryitem._id, {\n        params: {\n          page: categoryitem.page,\n          pagesize: categoryitem.pagesize\n        }\n      });\n      categoryitem.list.push(...res.data);\n      categoryitem.loading = false;\n      if (res.data.length < categoryitem.pagesize) {\n        categoryitem.finished = true;\n      }\n    },\n    onLoad() {\n      const categoryitem = this.categoryItem();\n      setTimeout(() => {\n        categoryitem.page += 1;\n        this.selectArticle();\n      }, 1000);\n    },\n    categoryItem() {\n      const categoryitem = this.category[this.active];\n      return categoryitem;\n    }\n  },\n  watch: {\n    active() {\n      const categoryitem = this.categoryItem();\n      if (!categoryitem.list.length) {\n        this.selectArticle();\n      }\n    }\n  },\n  created() {\n    this.selectCategory();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.home {\n  background-color: white;\n}\n.detailparent {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  .detailitem {\n    margin: 1.389vw 0;\n    width: 45%;\n  }\n}\n.categorytab{\n  position: relative;\n  .category-ico{\n    position: absolute;\n    z-index: 5;\n    right: 0;\n    top: 1.944vw;\n    padding: 1.389vw 2.778vw;\n    background-color: white;\n  }\n}\n\n</style>"]}]}