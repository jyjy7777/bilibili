{"remainingRequest":"D:\\BL\\vue-bilibili-master\\node_modules\\babel-loader\\lib\\index.js!D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\BL\\vue-bilibili-master\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\BL\\vue-bilibili-master\\src\\views\\Home.vue","mtime":1593351739000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\BL\\vue-bilibili-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOlxcQkxcXHZ1ZS1iaWxpYmlsaS1tYXN0ZXJcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXEJMXFx2dWUtYmlsaWJpbGktbWFzdGVyXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5hdkJhciBmcm9tICJAL2NvbXBvbmVudHMvY29tbW9uL05hdmJhci52dWUiOwppbXBvcnQgY292ZXIgZnJvbSAiLi9jb3ZlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcnk6IFtdLAogICAgICBhY3RpdmU6IDAKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOYXZCYXI6IE5hdkJhciwKICAgIGNvdmVyOiBjb3ZlcgogIH0sCiAgYWN0aXZhdGVkOiBmdW5jdGlvbiBhY3RpdmF0ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25ld0NhdCcpKSB7CiAgICAgIHZhciBuZXdDYXQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduZXdDYXQnKSk7CiAgICAgIHRoaXMuY2F0ZWdvcnkgPSB0aGlzLmNoYW5nZUNhdGVnb3J5KG5ld0NhdCk7CiAgICAgIHRoaXMuc2VsZWN0QXJ0aWNsZSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0Q2F0ZWdvcnk6IGZ1bmN0aW9uIHNlbGVjdENhdGVnb3J5KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25ld0NhdCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAuZ2V0KCIvY2F0ZWdvcnkiKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzLmNhdGVnb3J5ID0gX3RoaXMuY2hhbmdlQ2F0ZWdvcnkocmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEFydGljbGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoYW5nZUNhdGVnb3J5OiBmdW5jdGlvbiBjaGFuZ2VDYXRlZ29yeShkYXRhKSB7CiAgICAgIHZhciBjYXRlZ29yeTEgPSBkYXRhLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpdGVtLmxpc3QgPSBbXTsKICAgICAgICBpdGVtLnBhZ2UgPSAwOwogICAgICAgIGl0ZW0uZmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBpdGVtLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIGl0ZW0ucGFnZXNpemUgPSAxMDsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjYXRlZ29yeTE7CiAgICB9LAogICAgc2VsZWN0QXJ0aWNsZTogZnVuY3Rpb24gc2VsZWN0QXJ0aWNsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX2NhdGVnb3J5aXRlbSRsaXN0OwoKICAgICAgICB2YXIgY2F0ZWdvcnlpdGVtLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNhdGVnb3J5aXRlbSA9IF90aGlzMi5jYXRlZ29yeUl0ZW0oKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGh0dHAuZ2V0KCIvZGV0YWlsLyIgKyBjYXRlZ29yeWl0ZW0uX2lkLCB7CiAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIHBhZ2U6IGNhdGVnb3J5aXRlbS5wYWdlLAogICAgICAgICAgICAgICAgICAgIHBhZ2VzaXplOiBjYXRlZ29yeWl0ZW0ucGFnZXNpemUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIChfY2F0ZWdvcnlpdGVtJGxpc3QgPSBjYXRlZ29yeWl0ZW0ubGlzdCkucHVzaC5hcHBseShfY2F0ZWdvcnlpdGVtJGxpc3QsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YSkpOwoKICAgICAgICAgICAgICAgIGNhdGVnb3J5aXRlbS5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmxlbmd0aCA8IGNhdGVnb3J5aXRlbS5wYWdlc2l6ZSkgewogICAgICAgICAgICAgICAgICBjYXRlZ29yeWl0ZW0uZmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgY2F0ZWdvcnlpdGVtID0gdGhpcy5jYXRlZ29yeUl0ZW0oKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY2F0ZWdvcnlpdGVtLnBhZ2UgKz0gMTsKCiAgICAgICAgX3RoaXMzLnNlbGVjdEFydGljbGUoKTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAogICAgY2F0ZWdvcnlJdGVtOiBmdW5jdGlvbiBjYXRlZ29yeUl0ZW0oKSB7CiAgICAgIHZhciBjYXRlZ29yeWl0ZW0gPSB0aGlzLmNhdGVnb3J5W3RoaXMuYWN0aXZlXTsKICAgICAgcmV0dXJuIGNhdGVnb3J5aXRlbTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmU6IGZ1bmN0aW9uIGFjdGl2ZSgpIHsKICAgICAgdmFyIGNhdGVnb3J5aXRlbSA9IHRoaXMuY2F0ZWdvcnlJdGVtKCk7CgogICAgICBpZiAoIWNhdGVnb3J5aXRlbS5saXN0Lmxlbmd0aCkgewogICAgICAgIHRoaXMuc2VsZWN0QXJ0aWNsZSgpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zZWxlY3RDYXRlZ29yeSgpOwogIH0KfTs="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"home\" v-if=\"category\">\n    <nav-bar></nav-bar>\n    <div class=\"categorytab\">\n      <div class=\"category-ico\" @click=\"$router.push('/editcategory')\"><van-icon name=\"setting-o\" /></div>\n      <van-tabs v-model=\"active\" swipeable sticky animated>\n        <van-tab v-for=\"(item,index) in category\" :key=\"index\" :title=\"item.title\">\n          <van-list\n            v-model=\"item.loading\"\n            :immediate-check=\"false\"\n            :finished=\"item.finished\"\n            finished-text=\"我也是有底线的\"\n            @load=\"onLoad\"\n          >\n            <div class=\"detailparent\">\n              <cover\n                class=\"detailitem\"\n                :detailitem=\"categoryitem\"\n                v-for=\"(categoryitem,categoryindex) in item.list\"\n                :key=\"categoryindex\"\n              />\n            </div>\n          </van-list>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/Navbar.vue\";\nimport cover from \"./cover\";\nexport default {\n  data() {\n    return {\n      category: [],\n      active: 0\n    };\n  },\n  components: {\n    NavBar,\n    cover\n  },\n  activated() {\n    if(localStorage.getItem('newCat')) {\n        let newCat = JSON.parse(localStorage.getItem('newCat'))\n        this.category = this.changeCategory(newCat)\n        this.selectArticle();\n    }\n  },\n  methods: {\n    async selectCategory() {\n      if(localStorage.getItem('newCat')) {\n        return\n      }\n      const res = await this.$http.get(\"/category\");\n      this.category = this.changeCategory(res.data);\n      this.selectArticle();\n    },\n    changeCategory(data) {\n      const category1 = data.map((item, index) => {\n        item.list = [];\n        item.page = 0;\n        item.finished = false;\n        item.loading = true;\n        item.pagesize = 10;\n        return item;\n      });\n      return category1;\n    },\n    async selectArticle() {\n      const categoryitem = this.categoryItem();\n      const res = await this.$http.get(\"/detail/\" + categoryitem._id, {\n        params: {\n          page: categoryitem.page,\n          pagesize: categoryitem.pagesize\n        }\n      });\n      categoryitem.list.push(...res.data);\n      categoryitem.loading = false;\n      if (res.data.length < categoryitem.pagesize) {\n        categoryitem.finished = true;\n      }\n    },\n    onLoad() {\n      const categoryitem = this.categoryItem();\n      setTimeout(() => {\n        categoryitem.page += 1;\n        this.selectArticle();\n      }, 1000);\n    },\n    categoryItem() {\n      const categoryitem = this.category[this.active];\n      return categoryitem;\n    }\n  },\n  watch: {\n    active() {\n      const categoryitem = this.categoryItem();\n      if (!categoryitem.list.length) {\n        this.selectArticle();\n      }\n    }\n  },\n  created() {\n    this.selectCategory();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.home {\n  background-color: white;\n}\n.detailparent {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  .detailitem {\n    margin: 1.389vw 0;\n    width: 45%;\n  }\n}\n.categorytab{\n  position: relative;\n  .category-ico{\n    position: absolute;\n    z-index: 5;\n    right: 0;\n    top: 1.944vw;\n    padding: 1.389vw 2.778vw;\n    background-color: white;\n  }\n}\n\n</style>"],"sourceRoot":"src/views"}]}